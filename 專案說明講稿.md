# 🌟 生活記錄系統 - 專案說明講稿

## 📋 專案概述

大家好，今天要介紹的是「生活記錄系統」，這是一個幫助使用者追蹤和管理日常生活的 Web 應用程式。

---

## 🎯 專案目標

這個系統的主要目標是：
1. **簡化生活記錄** - 提供直觀的介面讓使用者輕鬆記錄每日生活
2. **數據持久化** - 使用雙重儲存機制確保數據安全
3. **數據可視化** - 透過統計卡片和評分系統追蹤生活品質
4. **跨平台存取** - 響應式設計支援手機和桌面裝置

---

## 🏗️ 技術架構

### 前端技術棧

1. **React 18**
   - 使用 CDN 方式引入，無需複雜的建置流程
   - 採用 `createElement` (h) 函數式寫法
   - 輕量化部署，適合快速開發

2. **Tailwind CSS + DaisyUI**
   - Tailwind CSS 提供 utility-first 的樣式系統
   - DaisyUI 提供預製的 UI 組件
   - 自定義漸層色彩和動畫效果

3. **純靜態網站**
   - 無需後端伺服器
   - 可部署到任何靜態託管平台
   - 快速載入，低成本運營

### 後端與數據儲存

1. **LocalStorage（本地儲存）**
   - 瀏覽器原生 API
   - 即時儲存，無需網路連線
   - 數據格式：`daily_entry:{id}` 作為 key

2. **Google Sheets（雲端備份）**
   - 使用 Google Apps Script 作為 API
   - 自動同步每筆記錄
   - 提供數據分析和長期保存

3. **CSV 導出功能**
   - 手動備份選項
   - 支援 UTF-8 with BOM 編碼
   - 可匯入 Excel 或 Google Sheets

---

## 💻 核心功能介紹

### 1. 數據記錄功能

**記錄內容包括：**
- 基本資訊：姓名、日期
- 飲食記錄：早餐、午餐、晚餐
- 健康記錄：運動、睡眠時間
- 心情追蹤：6 種心情選項（開心、平靜、疲累、壓力、興奮、難過）
- 評分系統：1-10 分的滑桿評分
- 備註欄位：自由文字記錄

**技術實現：**
```javascript
const handleSubmit = async () => {
  // 1. 驗證必填欄位
  // 2. 建立記錄物件
  // 3. 儲存到 localStorage
  // 4. 同步到 Google Sheets
  // 5. 更新 UI 狀態
}
```

### 2. 數據展示功能

**統計卡片：**
- 今日日期 - 顯示當前日期
- 總記錄數 - 累計記錄筆數
- 平均評分 - 計算所有記錄的平均分數

**歷史記錄列表：**
- 卡片式佈局
- 按時間倒序排列
- 顯示完整記錄內容
- 評分顏色編碼（綠色≥8分，黃色5-7分，紅色<5分）

### 3. 數據備份功能

**三種備份方式：**

1. **自動同步到 Google Sheets**
   - 每次提交自動觸發
   - 使用 `fetch` API 發送 POST 請求
   - 失敗時不影響本地儲存

2. **手動導出 CSV**
   - 點擊「導出 CSV」按鈕
   - 生成包含所有記錄的 CSV 檔案
   - 檔名格式：`生活記錄_2024-12-18.csv`

3. **LocalStorage 持久化**
   - 瀏覽器關閉後數據仍保留
   - 可跨分頁存取

---

## 🎨 UI/UX 設計特色

### 視覺設計

1. **漸層色彩系統**
   ```css
   .gradient-purple-pink {
     background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
   }
   ```
   - 紫色到粉色的主題漸層
   - 藍色到青色的輔助漸層
   - 根據評分動態變化的顏色

2. **動畫效果**
   - 卡片懸停放大效果（scale 1.05）
   - 按鈕點擊動畫
   - 平滑的過渡效果（transition: all 0.3s ease）

3. **圖示系統**
   - 使用 SVG 自定義圖示
   - 統一的 1.5rem 尺寸
   - 語義化的圖示選擇

### 響應式設計

```css
@media (max-width: 768px) {
  /* 手機版優化 */
  .stat-card { padding: 1rem; }
  .entry-card { margin-bottom: 1rem; }
}
```

- 使用 Tailwind 的響應式 class
- Grid 佈局自動調整欄位數
- 手機、平板、桌面完美適配

---

## 🔧 技術實現細節

### 1. 狀態管理

使用 React Hooks：
```javascript
const [entries, setEntries] = useState([]);        // 記錄列表
const [isLoading, setIsLoading] = useState(true);  // 載入狀態
const [formData, setFormData] = useState({...});   // 表單數據
```

### 2. 數據流程

**新增記錄流程：**
```
用戶填寫表單 
  → handleInputChange 更新 formData
  → handleSubmit 提交
  → 儲存到 localStorage
  → 同步到 Google Sheets
  → 更新 entries 狀態
  → 顯示成功提示
```

**載入記錄流程：**
```
頁面載入
  → useEffect 觸發
  → loadEntries 函數
  → 從 localStorage 讀取所有 key
  → 解析 JSON 數據
  → 按時間排序
  → 更新 UI
```

### 3. Google Apps Script API

**後端代碼（Apps Script）：**
```javascript
function doPost(e) {
  // 1. 解析 POST 請求的 JSON 數據
  const data = JSON.parse(e.postData.contents);
  
  // 2. 獲取試算表
  const sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet();
  
  // 3. 添加標題行（首次使用）
  if (sheet.getLastRow() === 0) {
    sheet.appendRow(['姓名', '日期', ...]);
  }
  
  // 4. 添加新記錄
  sheet.appendRow([data.name, data.date, ...]);
  
  // 5. 返回成功響應
  return ContentService.createTextOutput(JSON.stringify({success: true}));
}
```

**前端調用：**
```javascript
await fetch(googleSheetApiUrl, {
  method: 'POST',
  mode: 'no-cors',  // 避免 CORS 問題
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(formData)
});
```

### 4. CSV 導出實現

```javascript
const exportToCSV = () => {
  // 1. 定義 CSV 標題
  const headers = ['姓名', '日期', '早餐', ...];
  
  // 2. 轉換數據並處理特殊字符
  const csvData = entries.map(entry => 
    [entry.name, entry.date, ...]
      .map(field => `"${String(field).replace(/"/g, '""')}"`)
      .join(',')
  );
  
  // 3. 添加 BOM 支援中文
  const BOM = '\uFEFF';
  const blob = new Blob([BOM + csvContent], {type: 'text/csv;charset=utf-8'});
  
  // 4. 創建下載連結
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = `生活記錄_${new Date().toISOString().split('T')[0]}.csv`;
  link.click();
};
```

---

## 🚀 部署架構

### 1. GitHub 版本控制

```
life-tracker/
├── public/
│   └── index.html          # 主應用程式
├── package.json            # 專案配置
├── vercel.json            # Vercel 部署配置
├── .gitignore             # Git 忽略檔案
├── README.md              # 專案說明
├── GOOGLE_SHEETS_SETUP.md # 設置指南
└── google-apps-script.js  # Apps Script 代碼
```

### 2. Vercel 自動部署

**vercel.json 配置：**
```json
{
  "version": 2,
  "rewrites": [
    { "source": "/(.*)", "destination": "/public/index.html" }
  ],
  "headers": [
    {
      "source": "/public/(.*)",
      "headers": [
        { "key": "Cache-Control", "value": "public, max-age=31536000" }
      ]
    }
  ]
}
```

**部署流程：**
1. 推送代碼到 GitHub
2. Vercel 自動檢測變更
3. 自動建置和部署
4. 生成預覽網址

### 3. CDN 資源

使用公共 CDN 加速載入：
- React: `cdnjs.cloudflare.com`
- Tailwind CSS: `cdn.tailwindcss.com`
- DaisyUI: `cdn.jsdelivr.net`

---

## 📊 數據結構設計

### LocalStorage 數據格式

```javascript
// Key 格式
"daily_entry:1702886400000"

// Value 格式（JSON）
{
  "id": 1702886400000,
  "name": "張三",
  "date": "2024-12-18",
  "breakfast": "三明治、牛奶",
  "lunch": "便當",
  "dinner": "火鍋",
  "exercise": "跑步 30 分鐘",
  "sleep": "7 小時",
  "mood": "開心",
  "rating": 8,
  "notes": "今天天氣很好",
  "timestamp": 1702886400000
}
```

### Google Sheets 數據格式

| 姓名 | 日期 | 早餐 | 午餐 | 晚餐 | 運動 | 睡眠 | 心情 | 評分 | 備註 | 提交時間 |
|------|------|------|------|------|------|------|------|------|------|----------|
| 張三 | 2024-12-18 | 三明治 | 便當 | 火鍋 | 跑步30分 | 7小時 | 😊開心 | 8 | 天氣好 | 2024/12/18 09:30 |

---

## 🔒 安全性考量

### 1. 數據隱私
- 數據儲存在使用者本地瀏覽器
- Google Sheets 需要使用者自行設置
- 不經過第三方伺服器

### 2. API 安全
- Apps Script 使用 Google 的身份驗證
- 可設定存取權限控制
- HTTPS 加密傳輸

### 3. 輸入驗證
```javascript
if (!formData.name || !formData.date) {
  alert('請至少填寫姓名和日期');
  return;
}
```

---

## 📈 效能優化

### 1. 載入優化
- 使用 CDN 加速資源載入
- 靜態檔案快取（max-age=31536000）
- 最小化 HTTP 請求

### 2. 渲染優化
- React 虛擬 DOM 高效更新
- 條件渲染減少不必要的 DOM 操作
- CSS 動畫使用 GPU 加速（transform）

### 3. 數據優化
- LocalStorage 異步操作
- Google Sheets 同步使用 no-cors 模式
- 失敗不阻塞主流程

---

## 🎓 學習重點

### 對於初學者

1. **React 基礎**
   - Hooks 的使用（useState, useEffect）
   - 組件化思維
   - 事件處理

2. **CSS 技巧**
   - Flexbox 和 Grid 佈局
   - 漸層和動畫效果
   - 響應式設計

3. **JavaScript 實踐**
   - 異步編程（async/await）
   - 瀏覽器 API（localStorage, fetch）
   - 數據處理和轉換

### 對於進階開發者

1. **架構設計**
   - 前後端分離
   - 數據持久化策略
   - 錯誤處理機制

2. **整合技術**
   - Google Apps Script API
   - CSV 檔案處理
   - CORS 處理

3. **部署流程**
   - CI/CD 自動化
   - 靜態網站託管
   - 版本控制

---

## 🔮 未來擴展方向

### 短期計劃

1. **數據分析功能**
   - 圖表展示（使用 Chart.js）
   - 趨勢分析
   - 統計報表

2. **用戶體驗優化**
   - 深色模式
   - 自定義主題
   - 多語言支援

3. **功能增強**
   - 數據搜尋和篩選
   - 標籤系統
   - 提醒功能

### 長期計劃

1. **多用戶支援**
   - 用戶認證系統
   - 數據隔離
   - 權限管理

2. **移動應用**
   - PWA 支援
   - 離線功能
   - 推送通知

3. **AI 功能**
   - 智能建議
   - 情緒分析
   - 健康報告

---

## 💡 專案亮點

1. **零成本運營**
   - 免費託管（Vercel）
   - 免費數據庫（Google Sheets）
   - 無需伺服器維護

2. **快速開發**
   - 單一 HTML 檔案
   - 無需複雜建置工具
   - 即改即用

3. **實用性強**
   - 解決真實需求
   - 簡單易用
   - 數據可導出

4. **技術全面**
   - 前端開發
   - API 整合
   - 部署運維

---

## 🎯 總結

「生活記錄系統」是一個：
- ✅ 實用的生活管理工具
- ✅ 完整的全端專案實踐
- ✅ 優秀的學習範例
- ✅ 可持續擴展的基礎架構

透過這個專案，我們展示了如何使用現代 Web 技術構建一個功能完整、用戶友好的應用程式。

---

## 📚 參考資源

- **專案倉庫**: https://github.com/wuhua-7/LifeRecord
- **試算表**: https://docs.google.com/spreadsheets/d/1EzUN9l0pH0-as533cCkkD6IrzwGzKNAGVI6o507dgGQ/edit
- **技術文檔**: 
  - React: https://react.dev
  - Tailwind CSS: https://tailwindcss.com
  - Google Apps Script: https://developers.google.com/apps-script

---

## ❓ Q&A

感謝聆聽！歡迎提問。

---

**講稿結束**

*製作日期：2024年12月18日*
