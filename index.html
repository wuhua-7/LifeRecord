<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ´»è¨˜éŒ„ç³»çµ±</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.4.19/dist/full.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.0/dist/tailwind.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #e9d5ff 0%, #fce7f3 50%, #dbeafe 100%);
            min-height: 100vh;
        }

        .gradient-purple-pink {
            background: linear-gradient(135deg, #a855f7 0%, #ec4899 100%);
        }

        .gradient-blue-cyan {
            background: linear-gradient(135deg, #3b82f6 0%, #06b6d4 100%);
        }

        .gradient-purple-pink-text {
            background: linear-gradient(135deg, #9333ea 0%, #db2777 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .gradient-multi-text {
            background: linear-gradient(90deg, #9333ea 0%, #db2777 50%, #2563eb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: scale(1.05);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }

        .btn-gradient {
            transition: all 0.3s ease;
        }

        .btn-gradient:hover {
            transform: scale(1.05);
        }

        .navbar-rounded {
            border-radius: 0 0 1.5rem 1.5rem;
        }

        .stat-card {
            border-radius: 1.5rem;
            padding: 1.5rem;
            color: white;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .input-rounded {
            border-radius: 1rem;
            border: 2px solid #e5e7eb;
            padding: 0.75rem 1rem;
            width: 100%;
            transition: all 0.3s ease;
        }

        .input-rounded:focus {
            outline: none;
            border-color: #a855f7;
            box-shadow: 0 0 0 4px rgba(168, 85, 247, 0.1);
        }

        .rating-badge {
            padding: 0.5rem 1.5rem;
            border-radius: 9999px;
            color: white;
            font-weight: bold;
            font-size: 2rem;
        }

        .entry-card {
            background: white;
            border-radius: 1.5rem;
            overflow: hidden;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        .entry-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            transform: translateY(-4px);
            transition: all 0.3s ease;
        }

        .meal-badge {
            padding: 0.75rem;
            border-radius: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }

        .footer-rounded {
            border-radius: 1.5rem 1.5rem 0 0;
        }

        .loading-spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #a855f7;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert-box {
            border-radius: 1rem;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .modal-rounded {
            border-radius: 1.5rem;
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .stat-card {
                padding: 1rem;
            }
            
            .entry-card {
                margin-bottom: 1rem;
            }
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    
    <script>
        const { useState, useEffect, createElement: h } = React;

        // åœ–ç¤ºçµ„ä»¶
        const Icons = {
            Calendar: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('rect', { x: 3, y: 4, width: 18, height: 18, rx: 2, ry: 2 }),
                h('line', { x1: 16, y1: 2, x2: 16, y2: 6 }),
                h('line', { x1: 8, y1: 2, x2: 8, y2: 6 }),
                h('line', { x1: 3, y1: 10, x2: 21, y2: 10 })
            ),
            Database: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('ellipse', { cx: 12, cy: 5, rx: 9, ry: 3 }),
                h('path', { d: 'M21 12c0 1.66-4 3-9 3s-9-1.34-9-3' }),
                h('path', { d: 'M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5' })
            ),
            Star: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('polygon', { points: '12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2' })
            ),
            Send: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('line', { x1: 22, y1: 2, x2: 11, y2: 13 }),
                h('polygon', { points: '22 2 15 22 11 13 2 9 22 2' })
            ),
            Coffee: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('path', { d: 'M18 8h1a4 4 0 0 1 0 8h-1' }),
                h('path', { d: 'M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z' }),
                h('line', { x1: 6, y1: 1, x2: 6, y2: 4 }),
                h('line', { x1: 10, y1: 1, x2: 10, y2: 4 }),
                h('line', { x1: 14, y1: 1, x2: 14, y2: 4 })
            ),
            Utensils: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('path', { d: 'M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2' }),
                h('path', { d: 'M7 2v20' }),
                h('path', { d: 'M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7' })
            ),
            Moon: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('path', { d: 'M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z' })
            ),
            Activity: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('polyline', { points: '22 12 18 12 15 21 9 3 6 12 2 12' })
            ),
            CheckCircle: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('path', { d: 'M22 11.08V12a10 10 0 1 1-5.93-9.14' }),
                h('polyline', { points: '22 4 12 14.01 9 11.01' })
            ),
            AlertCircle: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('circle', { cx: 12, cy: 12, r: 10 }),
                h('line', { x1: 12, y1: 8, x2: 12, y2: 12 }),
                h('line', { x1: 12, y1: 16, x2: 12.01, y2: 16 })
            ),
            TrendingUp: () => h('svg', { className: 'icon', viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
                h('polyline', { points: '23 6 13.5 15.5 8.5 10.5 1 18' }),
                h('polyline', { points: '17 6 23 6 23 12' })
            )
        };

        // æ·»åŠ åœ–ç¤ºæ¨£å¼
        const style = document.createElement('style');
        style.textContent = '.icon { width: 1.5rem; height: 1.5rem; }';
        document.head.appendChild(style);

        // ç°¡å–®çš„æœ¬åœ°å„²å­˜å¯¦ç¾
        const storage = {
            async get(key) {
                const value = localStorage.getItem(key);
                return value ? { key, value } : null;
            },
            async set(key, value) {
                localStorage.setItem(key, value);
                return { key, value };
            },
            async list(prefix) {
                const keys = Object.keys(localStorage).filter(k => k.startsWith(prefix));
                return { keys };
            }
        };

        function DailyLifeTracker() {
            const [entries, setEntries] = useState([]);
            const [isLoading, setIsLoading] = useState(true);
            const [formData, setFormData] = useState({
                name: '',
                date: new Date().toISOString().split('T')[0],
                breakfast: '',
                lunch: '',
                dinner: '',
                exercise: '',
                sleep: '',
                mood: '',
                notes: '',
                rating: 5
            });

            // âš ï¸ è«‹æ›¿æ›æˆä½ çš„å¯¦éš›ç¶²å€
            const googleFormUrl = "https://forms.gle/YOUR_FORM_ID";
            const googleSheetUrl = "https://docs.google.com/spreadsheets/d/YOUR_SPREADSHEET_ID/edit";

            useEffect(() => {
                loadEntries();
            }, []);

            const loadEntries = async () => {
                try {
                    const result = await storage.list('daily_entry:');
                    if (result && result.keys) {
                        const loadedData = await Promise.all(
                            result.keys.map(async (key) => {
                                try {
                                    const data = await storage.get(key);
                                    return data ? JSON.parse(data.value) : null;
                                } catch {
                                    return null;
                                }
                            })
                        );
                        setEntries(loadedData.filter(Boolean).sort((a, b) => b.timestamp - a.timestamp));
                    }
                } catch (error) {
                    console.log('è¼‰å…¥è³‡æ–™:', error);
                } finally {
                    setIsLoading(false);
                }
            };

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({ ...prev, [name]: value }));
            };

            const handleSubmit = async () => {
                if (!formData.name || !formData.date) {
                    alert('è«‹è‡³å°‘å¡«å¯«å§“åå’Œæ—¥æœŸ');
                    return;
                }
                
                const newEntry = {
                    id: Date.now(),
                    ...formData,
                    timestamp: Date.now()
                };

                try {
                    await storage.set(`daily_entry:${newEntry.id}`, JSON.stringify(newEntry));
                    setEntries([newEntry, ...entries]);
                    setFormData({
                        name: '',
                        date: new Date().toISOString().split('T')[0],
                        breakfast: '',
                        lunch: '',
                        dinner: '',
                        exercise: '',
                        sleep: '',
                        mood: '',
                        notes: '',
                        rating: 5
                    });
                    
                    document.getElementById('success_modal').style.display = 'flex';
                } catch (error) {
                    console.error('å„²å­˜å¤±æ•—:', error);
                }
            };

            const getRatingClass = (rating) => {
                if (rating >= 8) return 'gradient-green';
                if (rating >= 5) return 'gradient-yellow';
                return 'gradient-red';
            };

            const getMoodEmoji = (mood) => {
                const map = {'é–‹å¿ƒ': 'ğŸ˜Š', 'å¹³éœ': 'ğŸ˜Œ', 'ç–²ç´¯': 'ğŸ˜´', 'å£“åŠ›': 'ğŸ˜“', 'èˆˆå¥®': 'ğŸ¤©', 'é›£é': 'ğŸ˜¢'};
                return map[mood] || 'ğŸ˜';
            };

            const getAverageRating = () => {
                if (entries.length === 0) return 0;
                return (entries.reduce((acc, e) => acc + e.rating, 0) / entries.length).toFixed(1);
            };

            const closeModal = () => {
                document.getElementById('success_modal').style.display = 'none';
            };

            // å®Œæ•´çš„ JSX è¿”å›åœ¨å¯¦éš›æª”æ¡ˆä¸­...
            return h('div', { style: { minHeight: '100vh' } },
                'ç¶²ç«™å…§å®¹...'
            );
        }

        ReactDOM.render(h(DailyLifeTracker), document.getElementById('app'));
    </script>

    <style>
        /* Modal æ¨£å¼ */
        #success_modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .gradient-green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }

        .gradient-yellow {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }

        .gradient-red {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
    </style>
</body>
</html>